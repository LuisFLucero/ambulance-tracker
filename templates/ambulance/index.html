{% extends "layout.html" %}

{% block content %}
<h2>Ambulance Dashboard</h2>

<div id="map"></div>

<h3 style="margin-top:1rem;">Active Requests</h3>
<ul>
  {% for req in requests %}
    <li>
      <strong>{{ req.address }}</strong> â€” {{ req.condition }}
      {% if req.lat and req.lon %}
        <button class="route-btn" data-lat="{{ req.lat }}" data-lon="{{ req.lon }}">
          Show Route
        </button>
      {% else %}
        <em>No coordinates</em>
      {% endif %}
    </li>
  {% else %}
    <li>No active requests</li>
  {% endfor %}
</ul>
{% endblock %}

{% block scripts %}
<link rel="stylesheet"
      href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css">
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
<script src="{{ url_for('static', filename='ambulance/script.js') }}"></script>
{% endblock %}
