<head>
  <meta charset="UTF-8">
  <title>Ambulance Tracker</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='client/style.css') }}">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">

  {% if "ambulance" in request.path %}
    <link rel="manifest" href="{{ url_for('static', filename='ambulance/manifest.json') }}">
    <meta name="theme-color" content="#dc3545">
  {% else %}
    <link rel="manifest" href="{{ url_for('static', filename='client/manifest.json') }}">
    <meta name="theme-color" content="#007bff">
  {% endif %}
</head>
<body>
<header>
  <h1>ðŸš‘ Ambulance Tracker</h1>
  {% if current_user.is_authenticated %}
    <a href="{{ url_for('logout') }}">Logout</a>
  {% endif %}
</header>
<main>
  {% block content %}{% endblock %}
</main>

<script>
  if ("serviceWorker" in navigator) {
    const sw = window.location.pathname.startsWith("/ambulance")
      ? "/static/ambulance/sw.js"
      : "/static/client/sw.js";

    navigator.serviceWorker.register(sw)
      .then(reg => console.log("Service Worker registered:", reg))
      .catch(err => console.error("SW registration failed:", err));
  }
</script>
</body>
